window.ktoBookmarklet?window.ktoBookmarklet.toggleMenu():function(){var a,r,i,l,e,d,c,t,o,u,m,n,h={},s=window['document'],p=s['location'],{host:g,protocol:v}=p,b='github.com';'file:'===v||'kierantop.github.io'===g||g===b?(r=(e,t,o)=>{var a=s.createElement(e);return Object.keys(t||{}).forEach(e=>{a.setAttribute(e,t[e])}),o&&(a.textContent=o),a},i=(e,t)=>{var o=r('div',{style:'border-radius:3px;width:fit-content;padding:3px;background-color:red;color:yellow;margin:10px auto -9px auto;'},e);if(a.children[0].append(o),setTimeout(()=>o.remove(),2e3),t)throw e},l=()=>{var e=s.activeElement;return e&&'textarea'===e.type||i('Please focus on a textarea',!0),[e,e.selectionStart,e.selectionEnd]},e=()=>{var[e]=l(),[e,t,o,a,r]=[e.style,'fontFamily','Courier','whiteSpace','nowrap'];e[t]?(e[t]='',e[a]=''):(e[t]=o,e[a]=r,i('Switched font to '+o+' and white-space to '+r+'; click again to revert'))},d=(e,t,o,a)=>{s.execCommand?s.execCommand('insertText',!1,a):(i('Beware, your undo buffer might misbehave.'),e.value=e.value.substring(0,t)+a+e.value.substring(o))},c=()=>{var[e,t,o]=l(),a='selection',r=(void 0!==t&&void 0!==o&&0<o-t||(e.focus(),s.execCommand('selectAll',!1),t=e.selectionStart,o=e.selectionEnd,a='entire textarea'),e.value.substring(t,o)),n=0,r=r.replaceAll(/\!\[image\]\((https:\/\/github\.com\/user-attachments\/.*?)\)/g,(e,t)=>(n+=1,'<img width=30% src='+t+'>'));d(e,t,o,r),i('Replaced '+n+' occurence(s) of ![image](...) in '+a)},t=(e,t)=>{var[o,a,r]=l();d(o,a,r,t),i('Inserted '+e+' at cursor')},o=e=>e.replaceAll(/^(\s+)/gm,'$1$1$1$1'),u=()=>{t('details',o(`<details>
 <summary>
  summary
 </summary>
 details
</details>
`))},m=()=>{t('table',o(`<table>
 <tr>
  <th>
   head1
  </th>
  <th>
   head2
  </th>
 </tr>
 <tr>
  <td>
   cell1
  </td>
  <td>
   cell2
  </td>
 </tr>
</table>
`))},n=(e,t,o)=>{var a=e=>e.preventDefault(),o=r('a',{href:'#',title:o,style:'text-decoration: none'},e);return Object.assign(o,{onmouseover:e=>e.target.style.textDecoration='underline',onmouseout:e=>e.target.style.textDecoration='none',onmousedown:a,onclick:a,onmouseup:e=>{a(e),t()}}),o},(h.toggleMenu=()=>{var t;a?(a.remove(),a=null):(a=r('div',{style:'width:100%;height:0;position:fixed;top:0;left:0;z-index:1000;'}),t=r('div',{style:'color:#17303B;margin:auto;text-align:center;padding:10px;background-color:#eee;border:2px solid #A0AD39;opacity:0.95;font-family:arial'}),['v0.3 | ',n('<img>',c,'Rewrite ![image] to <img>'),' | ',n('<table>',m,'Insert <table>'),' | ',n('<details>',u,'Insert <details>'),' | ',n('Aaâ†©',e,'Fixed-width font, no wrap'),' | ',n('about',()=>{p.href='https://kierantop.github.io/gh.html'},'About')].forEach(e=>t.append(e)),a.appendChild(t),s.body.append(a))})(),window.ktoBookmarklet=h):alert('Only run on '+b)}();
