window.ktoBookmarklet?window.ktoBookmarklet.toggleMenu():function(){var o,r,s,i,c,m,l,u,e,t,p,g,n,h={},d=window['document'],a=d['location'],{host:a,protocol:v}=a,f='github.com';'file:'===v||'kierantop.github.io'===a||a===f?(r=(e,t,n)=>{e=d.createElement(e);return Object.assign(e,t||{}),n&&(e.textContent=n),e},s=(e,t)=>{var n=r('div',{style:'border-radius:3px;width:fit-content;padding:3px;background-color:red;color:yellow;margin:10px auto -9px auto;'},e);if(o.children[0].append(n),setTimeout(()=>n.remove(),2e3),t)throw e},i=()=>{var e=d.activeElement;return e&&'textarea'===e.type||s('Please focus on a textarea',!0),[e,e.selectionStart,e.selectionEnd]},c=()=>{var[e]=i(),[e,t,n,o,a]=[e.style,'fontFamily','Courier','whiteSpace','nowrap'];e[t]?(e[t]='',e[o]=''):(e[t]=n,e[o]=a,s('Switched font to '+n+' and white-space to '+a+'; click again to revert'))},m=()=>{var e=window.getSelection();if(e.isCollapsed){for(var t=e.getRangeAt(0),n=t.startContainer,o=t.startOffset,a=n.textContent||'',r=o;0<r&&!/[\s"]/.test(a[r-1]);)r--;for(var i=o;i<a.length&&!/[\s"]/.test(a[i]);)i++;n=a.substring(r,i),e.removeAllRanges(),e.addRange(t)}else n=e.toString();var l=n.split('/').reverse()[0];navigator.clipboard.writeText(l).then(()=>s('Copied filename: '+l),()=>prompt('Copy filename:',l))},l=(e,t,n,o)=>{d.execCommand?d.execCommand('insertText',!1,o):(s('Beware, your undo buffer might misbehave.'),e.value=e.value.substring(0,t)+o+e.value.substring(n))},u=()=>{var[e,t,n]=i(),o='selection',a=(void 0!==t&&void 0!==n&&0<n-t||(e.focus(),d.execCommand('selectAll',!1),t=e.selectionStart,n=e.selectionEnd,o='entire textarea'),e.value.substring(t,n)),r=0,a=a.replaceAll(/\!\[image\]\((https:\/\/github\.com\/user-attachments\/.*?)\)/g,(e,t)=>(r+=1,'<img width=30% src='+t+'>'));l(e,t,n,a),s('Replaced '+r+' occurence(s) of ![image](...) in '+o)},e=(e,t)=>{var[n,o,a]=i();l(n,o,a,t),s('Inserted '+e+' at cursor')},t=e=>e.replaceAll(/^(\s+)/gm,'$1$1$1$1'),p=()=>{e('details',t('<details>\n <summary>\n  summary\n </summary>\n details\n</details>\n'))},g=()=>{e('table',t('<table>\n <tr>\n  <th>\n   head1\n  </th>\n  <th>\n   head2\n  </th>\n </tr>\n <tr>\n  <td>\n   cell1\n  </td>\n  <td>\n   cell2\n  </td>\n </tr>\n</table>\n'))},n=(e,t,n,o)=>{var a=e=>e.preventDefault(),n=r('a',{href:'javascript:',title:n,style:'text-decoration:none;color:#551a8b;',onmouseover:e=>e.target.style.textDecoration='underline',onmouseout:e=>e.target.style.textDecoration='none',onmousedown:a,onclick:a,onmouseup:e=>{a(e),t&&t()}},e);return Object.assign(n,o||{}),n},(h.toggleMenu=()=>{var t;o?(o.remove(),o=null):(o=r('div',{style:'width:100%;height:0;position:fixed;top:0;left:0;z-index:1000;'}),t=r('div',{style:'color:#17303B;margin:auto;text-align:center;padding:10px;background-color:#eee;border:2px solid #A0AD39;opacity:0.95;font-family:arial'}),['v0.4 | ',n('<img>',u,'Rewrite ![image] to <img>'),' | ',n('<table>',g,'Insert <table>'),' | ',n('<details>',p,'Insert <details>'),' | ',n('Aaâ†©',c,'Fixed-width font, no wrap'),' | ',n('filenameðŸ—',m,'Copy filename from element'),' | ',n('help',void 0,'Help',{onclick:'',target:'_blank',href:'https://kierantop.github.io/gh.html'})].forEach(e=>t.append(e)),o.appendChild(t),d.body.append(o))})(),window.ktoBookmarklet=h):alert('Only run on '+f)}();
